# ç½‘å®¿ç§‘æŠ€A/Bæ ‡æ†æ¡ˆä¾‹ V1åŸºå‡†

**åˆ›å»ºæ—¥æœŸ**: 2026-02-20  
**æ¡ˆä¾‹ä»£ç **: 300017.SZ  
**åˆ†æžæ—¥æœŸ**: 2026-01-26 (çœŸèµ·çˆ†) vs 2026-02-13 (éª—ç‚®)  
**çŠ¶æ€**: Phase 0å®Œæˆ - å·²éªŒè¯å¯å¤çŽ°

---

## ä¸€ã€å­—æ®µå®šä¹‰ä¸Žå•ä½è¯´æ˜Ž

### 1.1 æŽ¨å‡/æ¬ºéª—é˜¶æ®µ

| å­—æ®µ | å«ä¹‰ | å•ä½ | è®¡ç®—æ–¹å¼ |
|------|------|------|----------|
| `T_warmup` | çœŸèµ·çˆ†æŽ¨å‡æ—¶é•¿ | åˆ†é’Ÿ | ä»Žçªç ´5%åˆ°æŽ¨å‡ç»“æŸ |
| `Î”p_push` | æŽ¨å‡æ®µæ¶¨å¹… | % | æŽ¨å‡ç»“æŸä»·ç›¸å¯¹èµ·ç‚¹ä»·æ¶¨å¹… |
| `total_inflow_yi` | æŽ¨å‡æ®µèµ„é‡‘æµå…¥ | äº¿å…ƒ | sum(flow_5min) / 1e8 |

| å­—æ®µ | å«ä¹‰ | å•ä½ | è®¡ç®—æ–¹å¼ |
|------|------|------|----------|
| `T_fake` | éª—ç‚®æ¬ºéª—æ—¶é•¿ | åˆ†é’Ÿ | ä»Žçœ‹èµ·æ¥åƒæœºä¼šåˆ°å†²é«˜é«˜ç‚¹ |
| `Î”p_fake` | æ¬ºéª—å¹…åº¦ | % | é«˜ç‚¹ç›¸å¯¹èµ·ç‚¹çš„æ¶¨å¹… |
| `T_down` | å è½æ—¶é•¿ | åˆ†é’Ÿ | ä»Žé«˜ç‚¹åˆ°ç¡®è®¤å¤±è´¥ |
| `Î”p_down` | å è½å¹…åº¦ | % | å¤±è´¥ç‚¹ç›¸å¯¹é«˜ç‚¹çš„è·Œå¹…ï¼ˆè´Ÿå€¼ï¼‰ |

### 1.2 å¯äº¤æ˜“çª—å£

| å­—æ®µ | å«ä¹‰ | å•ä½ |
|------|------|------|
| `delay_minutes` | ä¿¡å·åŽå»¶è¿Ÿå…¥åœºæ—¶é—´ | åˆ†é’Ÿ |
| `entry_time` | å®žé™…å…¥åœºæ—¶é—´ | HH:MM:SS |
| `pnl_pct` | æŒæœ‰åˆ°æ”¶ç›˜æ”¶ç›ŠçŽ‡ | % |
| `max_drawdown_pct` | æŒæœ‰æœŸé—´æœ€å¤§å›žæ’¤ | % |

### 1.3 T+Nèµ°åŠ¿

| å­—æ®µ | å«ä¹‰ | å•ä½ | å¤‡æ³¨ |
|------|------|------|------|
| `T+1_open_gap` | T+1å¼€ç›˜è·³ç©º | % | ç›¸å¯¹äº‹ä»¶æ—¥æ”¶ç›˜ä»· |
| `T+1_close_change` | T+1æ”¶ç›˜æ¶¨è·Œ | % | ç›¸å¯¹äº‹ä»¶æ—¥æ”¶ç›˜ä»· |
| `T+2_close_change` | T+2æ”¶ç›˜æ¶¨è·Œ | % | ç›¸å¯¹äº‹ä»¶æ—¥æ”¶ç›˜ä»· |
| `T+3_close_change` | T+3æ”¶ç›˜æ¶¨è·Œ | % | ç›¸å¯¹äº‹ä»¶æ—¥æ”¶ç›˜ä»· |

**âš ï¸ æ³¨æ„**: T+Nç›®å‰æŒ‰**è‡ªç„¶æ—¥**è®¡ç®—ï¼Œéœ€åŽç»­åˆ‡æ¢è‡³**äº¤æ˜“æ—¥åŽ†**ï¼ˆTushare trade_calï¼‰

---

## äºŒã€æ ¸å¿ƒæ•°æ®ï¼ˆV1åŸºå‡†ï¼‰

### 2.1 äº‹ä»¶ç”Ÿå‘½å‘¨æœŸå¯¹æ¯”

| æŒ‡æ ‡ | çœŸèµ·çˆ† (1-26) | éª—ç‚® (2-13) | å·®å¼‚åˆ†æž |
|------|---------------|-------------|----------|
| **T_warmup / T_fake** | 13.8åˆ†é’Ÿ | 17.0åˆ†é’Ÿ | åˆå§‹æŽ¨å‡æ—¶é•¿**ç›¸è¿‘** |
| **æŽ¨å‡/æ¬ºéª—æ®µæ¶¨å¹…** | +5.40% | +3.71% | çœŸèµ·çˆ†ç•¥é«˜ |
| **æŽ¨å‡/æ¬ºéª—æ®µèµ„é‡‘** | 3.52äº¿å…ƒ | [å¾…è¡¥] | çº¦å å½“æ—¥æˆäº¤é¢5% |
| **å½“æ—¥æ”¶ç›˜æ¶¨å¹…** | **+20.03%** | **+1.81%** | **å…³é”®å·®å¼‚ï¼šç»´æŒèƒ½åŠ›** |
| **å è½æ—¶é•¿ T_down** | - | 309.4åˆ†é’Ÿ | éª—ç‚®æŒç»­å è½ |
| **å è½å¹…åº¦ Î”p_down** | - | -7.59% | ä»Žé«˜ç‚¹å¤§å¹…å›žè½ |

**æ ¸å¿ƒç»“è®º**: 
> çœŸèµ·çˆ†å’Œéª—ç‚®çš„**åˆå§‹æŽ¨å‡æ—¶é•¿ç›¸å½“**ï¼ˆçº¦15åˆ†é’Ÿï¼‰ï¼Œæ ¸å¿ƒå·®å¼‚åœ¨äºŽ**æŽ¨å‡åŽçš„ç»´æŒèƒ½åŠ›**ï¼š
> - çœŸèµ·çˆ†ï¼šæŽ¨å‡åŽèƒ½ç»´æŒé«˜ä½ï¼Œæ”¶ç›˜+20%
> - éª—ç‚®ï¼šæŽ¨å‡åŽæ— æ³•ç»´æŒï¼ŒæŒç»­å è½309åˆ†é’Ÿï¼Œæ”¶ç›˜ä»…+1.81%

### 2.2 å¯äº¤æ˜“çª—å£å¯¹æ¯”

| å…¥åœºæ—¶æœº | çœŸèµ·çˆ†æ”¶ç›Š | çœŸèµ·çˆ†å›žæ’¤ | éª—ç‚®æ”¶ç›Š | éª—ç‚®å›žæ’¤ |
|----------|-----------|-----------|---------|---------|
| ä¿¡å·åŽ1åˆ†é’Ÿ | **+13.04%** | 5.44% | **-3.14%** | 6.98% |
| ä¿¡å·åŽ3åˆ†é’Ÿ | **+10.77%** | 5.44% | **-5.02%** | 6.98% |
| ä¿¡å·åŽ5åˆ†é’Ÿ | **+9.54%** | 5.44% | **-4.90%** | 6.98% |
| ä¿¡å·åŽ10åˆ†é’Ÿ | **+8.16%** | 5.44% | **-4.90%** | 6.98% |

**äº¤æ˜“å¯ç¤º**:
- çœŸèµ·çˆ†ï¼šå³ä½¿å»¶è¿Ÿ10åˆ†é’Ÿå…¥åœºï¼Œä»æœ‰+8%æ”¶ç›Šï¼Œå›žæ’¤å¯æŽ§ï¼ˆ5.44%ï¼‰
- éª—ç‚®ï¼šä¿¡å·åŽ1åˆ†é’Ÿå…¥åœºå³äºæŸï¼Œå»¶è¿Ÿå…¥åœºäºæŸæ‰©å¤§
- **å†³ç­–è§„åˆ™**: ä¿¡å·åŽ3åˆ†é’Ÿå†…è‹¥æœªæŒç»­èµ°å¼ºï¼Œåº”æ”¾å¼ƒå…¥åœº

### 2.3 T+Näº‹ä»¶åŽèµ°åŠ¿ï¼ˆçœŸèµ·çˆ†æ—¥ï¼‰

| æ—¶é—´ | æ”¶ç›˜æ¶¨è·Œ | ç‰¹å¾ |
|------|---------|------|
| T+1 (1-27) | -1.74% | æ¶¨åœæ¬¡æ—¥æ­£å¸¸å›žè°ƒ |
| T+2 (1-28) | **+13.13%** | ç¬¬äºŒæ³¢æ‹‰å‡ |
| T+3 (1-29) | **+21.92%** | æŒç»­èµ°é«˜ |

**ç­–ç•¥å¯ç¤º**:
- çœŸèµ·çˆ†ä¸æ˜¯"ä¸€æ—¥æ¸¸"ï¼ŒT+2/T+3ç»§ç»­å¤§æ¶¨
- èµ·çˆ†æ—¥æ¶¨åœåŽï¼ŒT+1å›žè°ƒæ˜¯åŠ ä»“æœºä¼šè€Œéžå‡ºè´§ä¿¡å·

---

## ä¸‰ã€äº‹ä»¶åˆ†ç±»è§„åˆ™ï¼ˆV1ï¼‰

### 3.1 çœŸèµ·çˆ†åˆ¤å®šæ¡ä»¶

```python
# å¿…é¡»åŒæ—¶æ»¡è¶³
1. æ¶¨å¹…çªç ´é˜ˆå€¼ï¼ˆ>5%ï¼‰
2. 5åˆ†é’Ÿèµ„é‡‘æµä¸ºæ­£
3. æŽ¨å‡åŽèƒ½ç»´æŒé«˜ä½ï¼ˆæ”¶ç›˜>15%ï¼‰
4. èµ„é‡‘æŒç»­æ€§æ¯”çŽ‡ sustain_ratio > 1.2
```

### 3.2 éª—ç‚®åˆ¤å®šæ¡ä»¶

```python
# å¿…é¡»åŒæ—¶æ»¡è¶³
1. æ¶¨å¹…çªç ´é˜ˆå€¼ï¼ˆ>5%ï¼‰
2. å†²é«˜åŽå‡ºçŽ°å¤§å¹…å›žè½ï¼ˆå›žæ’¤>3%ï¼‰
3. æ”¶ç›˜ç›¸å¯¹äºŽé«˜ç‚¹çš„å›žæ’¤æ¯”ä¾‹ > 50%
4. æœ€ç»ˆæ”¶ç›˜æ¶¨å¹… < 5%
5. èµ„é‡‘ç”±æ­£è½¬è´Ÿï¼ˆ15åˆ†é’Ÿæµ/5åˆ†é’Ÿæµ < 1.0ï¼‰
```

---

## å››ã€æŠ€æœ¯å®žçŽ°è¯´æ˜Ž

### 4.1 æ•°æ®æµ

```
QMT Tick Data â†’ DataService â†’ RollingFlowCalculator â†’ EventLifecycleAnalyzer â†’ WangsuExtremeAnalyzer
```

### 4.2 å…³é”®ä»£ç è·¯å¾„

| ç»„ä»¶ | è·¯å¾„ | æ ¸å¿ƒåŠŸèƒ½ |
|------|------|----------|
| æ•°æ®æœåŠ¡ | `logic/services/data_service.py` | ç»Ÿä¸€æ•°æ®è®¿é—®ï¼ˆpre_close/tick/dailyï¼‰ |
| èµ„é‡‘è®¡ç®— | `logic/rolling_metrics.py` | å¤šå‘¨æœŸèµ„é‡‘æµåˆ‡ç‰‡ï¼ˆ1/5/15/30minï¼‰ |
| äº‹ä»¶åˆ†æž | `logic/event_lifecycle_analyzer.py` | äº‹ä»¶åŒºé—´æå–ä¸Žåˆ†ç±» |
| ç½‘å®¿åˆ†æž | `tools/analyze_wangsu_extreme.py` | å•ç¥¨æ·±åº¦åˆ†æžï¼ˆç ”ç©¶çº§ï¼‰ |

### 4.3 èµ„é‡‘è®¡ç®—å•ä½ï¼ˆé‡è¦ï¼‰

```python
# Tickæ•°æ®çš„volumeå­—æ®µå•ä½æ˜¯"è‚¡"ï¼Œä¸æ˜¯"æ‰‹"
# æ­£ç¡®è®¡ç®—ï¼š
estimated_flow = volume_delta * price  # å•ä½ï¼šå…ƒ

# æ˜¾ç¤ºæ—¶è½¬æ¢ä¸ºäº¿å…ƒï¼š
total_inflow_yi = sum(flow_5min) / 1e8
```

**âš ï¸ åŽ†å²ä¿®æ­£**: æ›¾é”™è¯¯ä¹˜ä»¥100ï¼Œå¯¼è‡´èµ„é‡‘è®¡ç®—åå·®100å€ï¼ˆ1777äº¿â†’3.52äº¿ï¼‰

---

## äº”ã€å·²çŸ¥å±€é™ä¸Žé£Žé™©æç¤º

### 5.1 èµ„é‡‘ä¼°ç®—ç®€åŒ–

å½“å‰ä½¿ç”¨`estimated_flow = volume_delta * price`ç”¨ä»·æ ¼æ¶¨è·Œç²—åˆ¤æµå‘ï¼š
- âœ… ä¼˜ç‚¹ï¼šç®€å•å¿«é€Ÿï¼Œé€‚åˆTickçº§å®žæ—¶è®¡ç®—
- âš ï¸ å±€é™ï¼šæœªè€ƒè™‘ç›˜å£æ·±åº¦å’Œä¹°å–å•æ¯”ä¾‹
- ðŸ“‹ åŽç»­å‡çº§ï¼šæŽ¥å…¥Level2èµ„é‡‘æµï¼ˆå‚è€ƒ`Level2TickProvider`ï¼‰

### 5.2 T+Näº¤æ˜“æ—¥åŽ†

å½“å‰T+NæŒ‰**è‡ªç„¶æ—¥**è®¡ç®—ï¼Œé‡åˆ°å‘¨æœ«ä¼šäº§ç”Ÿåå·®ï¼š
- 2026-02-13ï¼ˆå‘¨äº”ï¼‰çš„T+1æ˜¯å‘¨å…­ï¼ˆéžäº¤æ˜“æ—¥ï¼‰
- ðŸ“‹ åŽç»­å‡çº§ï¼šæŽ¥å…¥Tushare `trade_cal`æŽ¥å£ï¼Œä½¿ç”¨äº¤æ˜“æ—¥åŽ†

### 5.3 çŽ¯å¢ƒæ¡ä»¶ç¼ºå¤±

å½“å‰æœªæŽ¥å…¥æ¿å—å…±æŒ¯ã€å¸‚åœºæƒ…ç»ªç­‰çŽ¯å¢ƒæŒ‡æ ‡ï¼š
- ðŸ“‹ åŽç»­è¡¥å……ï¼šä»ŽWindFilterèŽ·å–resonance_scoreã€ä»Žmarket_sentiment.jsonèŽ·å–æƒ…ç»ªæŒ‡æ ‡

### 5.4 å½¢æ€æ ‡ç­¾ç©ºç™½

å½“å‰ç¼ºä¹stair/spikeç­‰å½¢æ€æ ‡ç­¾ï¼š
- ðŸ“‹ åŽç»­è¡¥å……ï¼šæ‰‹å·¥æ ‡æ³¨ç½‘å®¿æ¡ˆä¾‹ï¼Œé€†å‘æå–å½¢æ€è§„åˆ™

---

## å…­ã€å¤çŽ°æŒ‡å—

### 6.1 è¿è¡Œåˆ†æž

```bash
cd E:\MyQuantTool
venv_qmt\Scripts\python.exe tools\analyze_wangsu_extreme.py
```

### 6.2 é¢„æœŸè¾“å‡º

- æŽ§åˆ¶å°ï¼šäº‹ä»¶ç”Ÿå‘½å‘¨æœŸ + å¯äº¤æ˜“çª—å£ + T+Nèµ°åŠ¿
- JSONæ–‡ä»¶ï¼š`data/wanzhu_data/wangsu_analysis/wangsu_extreme_analysis_{timestamp}.json`

### 6.3 éªŒè¯è¦ç‚¹

- [ ] èµ„é‡‘æµå…¥çº¦3.52äº¿å…ƒï¼ˆä¸æ˜¯1777äº¿å…ƒï¼‰
- [ ] T_warmupçº¦13.8åˆ†é’Ÿï¼ˆä¸æ˜¯116åˆ†é’Ÿï¼‰
- [ ] çœŸèµ·çˆ†æ”¶ç›˜+20.03%ï¼Œéª—ç‚®æ”¶ç›˜+1.81%
- [ ] å¯äº¤æ˜“çª—å£æ”¶ç›Šç¬¦åˆè¡¨æ ¼æ•°æ®

---

## ä¸ƒã€Phase 1ä¼˜å…ˆçº§ï¼ˆCTOå·²ç¡®è®¤ï¼‰

1. **åœ¨ç½‘å®¿è„šæœ¬ä¸Šè¡¥çŽ¯å¢ƒ**: æŽ¥å…¥WindFilter resonance_scoreã€market_sentiment
2. **è¡¥ç»´æŒèƒ½åŠ›æŒ‡æ ‡**: è®¡ç®—"é«˜ä½ç»´æŒæ—¶é•¿"ï¼ˆä»·æ ¼ä¿æŒåœ¨æŽ¨å‡ç»“æŸä»·-2%ä»¥ä¸Šçš„æ—¶é—´ï¼‰
3. **å°èŒƒå›´éªŒè¯**: è·‘5-10ä¸ªverifiedæ ·æœ¬ï¼ŒéªŒè¯"ç»´æŒèƒ½åŠ›"ä½œä¸ºåŒºåˆ†ç‰¹å¾çš„ç¨³å¥æ€§
4. **ç¡®è®¤ç¨³å®šåŽ**: å†è®¨è®ºé€šç”¨åŒ–å°è£…ï¼ˆEventLifecycleServiceï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: V1  
**æœ€åŽæ›´æ–°**: 2026-02-20  
**ä¸‹æ¬¡æ›´æ–°**: çŽ¯å¢ƒæ¡ä»¶è¡¥å……åŽæ›´æ–°è‡³V2
