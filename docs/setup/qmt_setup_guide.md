# QMT æ¥å£é…ç½®æŒ‡å—

## ğŸ“– æ¦‚è¿°

QMT (è¿…æŠ•é‡åŒ–äº¤æ˜“ç³»ç»Ÿ) æ˜¯ä¸€æ¬¾ä¸“ä¸šçš„é‡åŒ–äº¤æ˜“å¹³å°ï¼Œæä¾›æ•°æ®æ¥å£å’Œäº¤æ˜“æ¥å£ã€‚

## ğŸ”§ é…ç½®æ­¥éª¤

### 1. å®‰è£… QMT å®¢æˆ·ç«¯

1. ä¸‹è½½å¹¶å®‰è£… QMT å®¢æˆ·ç«¯ï¼ˆè¿…æŠ•é‡åŒ–äº¤æ˜“ç»ˆç«¯ï¼‰
2. å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ QMT å®¢æˆ·ç«¯
3. åœ¨ QMT å®¢æˆ·ç«¯ä¸­ç™»å½•ä½ çš„äº¤æ˜“è´¦æˆ·

### 2. é…ç½®æ•°æ®æ¥å£

ç¼–è¾‘ `config/qmt_config.json` æ–‡ä»¶ï¼š

```json
{
  "qmt_data": {
    "enabled": true,
    "ip": "127.0.0.1",
    "port": 58610,
    "timeout": 10,
    "auto_connect": true,
    "retry_times": 3,
    "retry_interval": 2
  }
}
```

**é‡è¦å‚æ•°è¯´æ˜ï¼š**
- `enabled`: æ˜¯å¦å¯ç”¨æ•°æ®æ¥å£
- `ip`: QMT å®¢æˆ·ç«¯ IP åœ°å€ï¼ˆæœ¬åœ°ä½¿ç”¨ 127.0.0.1ï¼‰
- `port`: QMT æ•°æ®æ¥å£ç«¯å£ï¼ˆé»˜è®¤ 58610ï¼‰
- `timeout`: è¿æ¥è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
- `retry_times`: è¿æ¥å¤±è´¥é‡è¯•æ¬¡æ•°
- `retry_interval`: é‡è¯•é—´éš”ï¼ˆç§’ï¼‰

### 3. é…ç½®äº¤æ˜“æ¥å£ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ä½¿ç”¨å®ç›˜äº¤æ˜“åŠŸèƒ½ï¼Œéœ€è¦é…ç½®äº¤æ˜“æ¥å£ï¼š

```json
{
  "qmt_trader": {
    "enabled": true,
    "ip": "127.0.0.1",
    "port": 58611,
    "session_id": 123456,
    "account_id": "ä½ çš„è´¦æˆ·ID",
    "account_type": "STOCK",
    "username": "ä½ çš„ç”¨æˆ·å",
    "password": "ä½ çš„å¯†ç "
  }
}
```

**é‡è¦å‚æ•°è¯´æ˜ï¼š**
- `enabled`: æ˜¯å¦å¯ç”¨äº¤æ˜“æ¥å£
- `port`: QMT äº¤æ˜“æ¥å£ç«¯å£ï¼ˆé»˜è®¤ 58611ï¼‰
- `session_id`: ä¼šè¯ IDï¼ˆè‡ªå®šä¹‰ï¼Œç”¨äºæ ‡è¯†ä¸åŒçš„å®¢æˆ·ç«¯ï¼‰
- `account_id`: äº¤æ˜“è´¦æˆ· ID
- `account_type`: è´¦æˆ·ç±»å‹ï¼ˆSTOCK: è‚¡ç¥¨è´¦æˆ·ï¼‰
- `username`: QMT ç™»å½•ç”¨æˆ·å
- `password`: QMT ç™»å½•å¯†ç 

### 4. è¿è¡Œåˆå§‹åŒ–è„šæœ¬

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œè¿æ¥æµ‹è¯•ï¼š

```bash
python scripts/init_qmt.py
```

è¯¥è„šæœ¬ä¼šï¼š
- âœ… æ£€æŸ¥é…ç½®æ–‡ä»¶
- âœ… æµ‹è¯•æ•°æ®æ¥å£è¿æ¥
- âœ… æµ‹è¯•æ•°æ®è·å–åŠŸèƒ½
- âœ… æµ‹è¯•äº¤æ˜“æ¥å£è¿æ¥ï¼ˆå¦‚æœå¯ç”¨ï¼‰

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### è·å–è‚¡ç¥¨æ•°æ®

```python
from xtquant import xtdata

# è·å–è‚¡ç¥¨åˆ—è¡¨
stock_list = xtdata.get_stock_list_in_sector('æ²ªæ·±Aè‚¡')

# ä¸‹è½½å†å²æ•°æ®
xtdata.download_history_data('600519.SH', period='1d', start_time='20240101', end_time='20240131')

# è·å–æœ¬åœ°æ•°æ®
data = xtdata.get_local_data(
    field_list=['time', 'open', 'high', 'low', 'close'],
    stock_list=['600519.SH'],
    period='1d',
    start_time='20240101',
    end_time='20240131'
)

# è·å–å®æ—¶tickæ•°æ®
tick_data = xtdata.get_full_tick(['600519.SH'])
```

### ä½¿ç”¨äº¤æ˜“æ¥å£

```python
from xtquant import xttrader

# åˆ›å»ºå›è°ƒç±»
class MyCallback(xttrader.XtQuantTraderCallback):
    def on_stock_order(self, order):
        print(f"è®¢å•çŠ¶æ€: {order}")

# åˆ›å»ºäº¤æ˜“å®¢æˆ·ç«¯
trader = xttrader.XtQuantTrader(MyCallback(), session_id=123456)

# è¿æ¥äº¤æ˜“æ¥å£
trader.connect()

# æŸ¥è¯¢è´¦æˆ·èµ„äº§
asset = trader.query_stock_asset()

# ä¸‹å•
order_id = trader.order_stock(
    account='ä½ çš„è´¦æˆ·ID',
    stock_code='600519.SH',
    order_type=xttrader.STOCK_BUY,
    order_volume=100,
    price_type=xttrader.FIX_PRICE,
    price=1800.0
)
```

## ğŸ” å¸¸è§é—®é¢˜

### 1. è¿æ¥å¤±è´¥

**é—®é¢˜**: `rpcåˆå§‹åŒ–å¤±è´¥` æˆ–è¿æ¥è¶…æ—¶

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥ QMT å®¢æˆ·ç«¯æ˜¯å¦å·²å¯åŠ¨
- æ£€æŸ¥ç«¯å£é…ç½®æ˜¯å¦æ­£ç¡®ï¼ˆæ•°æ®ç«¯å£ 58610ï¼Œäº¤æ˜“ç«¯å£ 58611ï¼‰
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- å°è¯•é‡å¯ QMT å®¢æˆ·ç«¯

### 2. æ— æ³•è·å–æ•°æ®

**é—®é¢˜**: `æ— æ³•è·å–è‚¡ç¥¨åˆ—è¡¨` æˆ– `tickæ•°æ®ä¸ºç©º`

**è§£å†³æ–¹æ¡ˆ**:
- ç¡®ä¿å·²ä¸‹è½½åŸºç¡€æ•°æ®ï¼ˆåœ¨ QMT å®¢æˆ·ç«¯ä¸­ï¼‰
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¡®ä¿åœ¨äº¤æ˜“æ—¶é—´å†…ï¼ˆ9:30-15:00ï¼‰

### 3. äº¤æ˜“æ¥å£è¿æ¥å¤±è´¥

**é—®é¢˜**: `äº¤æ˜“æ¥å£è¿æ¥å¤±è´¥`

**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥è´¦æˆ·é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®ä¿å·²å¼€é€šå®ç›˜äº¤æ˜“æƒé™
- æ£€æŸ¥ session_id æ˜¯å¦å”¯ä¸€
- ç¡®ä¿åœ¨ QMT å®¢æˆ·ç«¯ä¸­å·²ç™»å½•

## ğŸ“š æ›´å¤šèµ„æº

- [QMT å®˜æ–¹æ–‡æ¡£](xtquant/doc/)
- [xtdata API å‚è€ƒ](xtquant/xtdata.py)
- [xttrader API å‚è€ƒ](xtquant/xttrader.py)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **äº¤æ˜“é£é™©**: ä½¿ç”¨å®ç›˜äº¤æ˜“æ¥å£å‰ï¼Œè¯·å……åˆ†æµ‹è¯•ç­–ç•¥
2. **æƒé™é™åˆ¶**: æŸäº›åŠŸèƒ½éœ€è¦ç‰¹å®šçš„äº¤æ˜“æƒé™
3. **æ•°æ®é™åˆ¶**: å†å²æ•°æ®éœ€è¦æå‰ä¸‹è½½
4. **ç½‘ç»œä¾èµ–**: éœ€è¦ä¿æŒç¨³å®šçš„ç½‘ç»œè¿æ¥
5. **æ—¶é—´é™åˆ¶**: æŸäº›åŠŸèƒ½åªåœ¨äº¤æ˜“æ—¶é—´å†…å¯ç”¨

## ğŸ¯ å¿«é€Ÿå¼€å§‹

1. ç¼–è¾‘ `config/qmt_config.json`
2. å¯åŠ¨ QMT å®¢æˆ·ç«¯å¹¶ç™»å½•
3. è¿è¡Œ `python scripts/init_qmt.py` æµ‹è¯•è¿æ¥
4. å‚è€ƒç¤ºä¾‹ä»£ç å¼€å§‹ä½¿ç”¨

---

**Author**: iFlow CLI
**Date**: 2026-01-28
**Version**: V1.0