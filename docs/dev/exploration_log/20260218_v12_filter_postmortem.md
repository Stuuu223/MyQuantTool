# CASE: V12.1.0 过滤器失效与回滚
# ID: CASE_2026_02_V12_POSTMORTEM

## 0. 背景 & 目标

- **为什么开始这条探索**：V12.1.0过滤器在实际数据上通过率仅0.11%，远低于模拟数据的93.33%
- **想回答的关键问题**：
  1. V12.1.0过滤器为什么失效？
  2. 串联一票否决架构有什么问题？
  3. 如何重构为评分制？

---

## 1. 当天进展 (2026-02-18)

### 1.1 做了什么
- 分析V12.1.0三大过滤器（板块共振、动态阈值、竞价校验）
- 对比模拟数据和实际数据的表现差异
- 将V12.1.0标记为EXPERIMENTAL，默认禁用

### 1.2 关键发现
- **板块共振过滤器**：阈值过高（涨停≥3只/上涨≥35%），通过率3.8%
- **动态阈值过滤器**：市值范围过窄（50-1000亿），误杀小盘起爆股
- **竞价校验过滤器**：使用prev_close*0.99估算，回测失真
- **串联架构问题**：一票否决，综合通过率仅0.11%

**数据对比**：
- 模拟数据：胜率93.33%，收益率+9.32%
- 实际数据：胜率25.00%，收益率-21.01%

### 1.3 决策/动作
- **禁用V12.1.0**：标记EXPERIMENTAL，默认enable_filters=False
- **重构方向**：从一票否决改为评分制（参考V11 TripleFunnel）
- **长期计划**：实现统一的过滤层抽象

---

## 2. 未解决问题

- **必填**：
  - 如何重构V12.1.0为评分制？
  - 过滤器的权重如何分配？
  - 何时可以重新启用V12.1.0（需要回测证据）？

---

## 3. 回顾链接

- **相关代码文件**：
  - `backtest/t1_tick_backtester.py` - V12.1.0过滤器使用位置
  - `logic/strategies/wind_filter.py` - 板块共振过滤器
  - `logic/strategies/dynamic_threshold.py` - 动态阈值管理器
  - `logic/strategies/auction_strength_validator.py` - 竞价强度校验

- **相关文档**：
  - `docs/dev/CTO_DECISION_2026-02-18.md` - CTO决策（第1章V12.1.0过滤器）

---

**Owner**: AI项目总监  
**Status**: OPEN