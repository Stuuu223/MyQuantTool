# 综合个股分析工具使用说明

## 📊 功能概述

这是一个综合的个股分析工具，结合了 AkShare 和 QMT 数据，提供完整的个股分析功能。

## 🚀 快速开始

### 1. 使用 AI 便捷接口（推荐）

```python
from stock_ai_tool import analyze_stock, quick, ask_more_days

# 快速分析（5天）
result = quick('300997', 5)
print(result)

# 完整分析（10天）
result = analyze_stock('300997', 10, mode='full')
print(result)

# 询问是否需要更久的数据
print(ask_more_days(10))
```

### 2. 使用命令行

```bash
# 完整分析
python comprehensive_stock_tool.py 300997 10

# 快速分析
python comprehensive_stock_tool.py 300997 5 quick
```

## 📋 功能详情

### 1. 资金流向分析（AkShare）

- 数据来源：东方财富
- 数据范围：最近 100-120 天
- 包含指标：
  - 超大单净流入（≥50万股或100万元）
  - 大单净流入（≥10万股或20万元）
  - 中单净流入（≥2万股或4万元）
  - 小单净流入（<2万股或4万元）
  - 机构净流入（超大单+大单）
  - 散户净流入（中单+小单）

### 2. 技术指标分析（QMT）

- 均线：MA5、MA10、MA20、MA60
- 乖离率：BIAS_5、BIAS_10
- 布林带：BOLL_UPPER、BOLL_MID、BOLL_LOWER
- RSI指标
- MACD指标

### 3. 实时盘口数据（QMT）

- 当前价格、涨跌幅
- 五档买卖盘
- 买卖压力分析

## 🎯 使用场景

### 场景1：AI 快速分析

```python
from stock_ai_tool import analyze_stock

# AI 直接调用
result = analyze_stock('300997', days=10, mode='full')
print(result)

# 提示用户是否需要更久的数据
print(ask_more_days(10))
```

### 场景2：用户指定天数

```python
from stock_ai_tool import analyze_stock

# 分析最近30天
result = analyze_stock('300997', days=30, mode='full')
print(result)
```

### 场景3：快速查看核心指标

```python
from stock_ai_tool import quick

# 快速查看最近5天
result = quick('301171', 5)
print(result)
```

## 📊 输出示例

### 快速分析输出：

```
301171 快速分析（最近5天）
--------------------------------
趋势: 🔴 减仓
建议: 回避
吸筹: 1天 | 减仓: 4天
机构累计: -30150.35万元
```

### 完整分析输出：

```
================================================================================
📊 300997 综合分析报告
================================================================================
分析天数: 最近 10 天
分析时间: 2026-02-02 17:22:33
================================================================================

## 第一部分：资金流向分析（AkShare）

数据范围: 2025-08-06 至 2026-02-02 (121天)

📅 最近 10 天资金流向（单位：万元）：

        日期        超大单         大单         中单         小单         机构         散户
2026-01-20  1154.18  4895.43  1944.66 -7994.27  6049.61 -6049.61
...

## 第二部分：QMT 实时数据
...

## 第四部分：综合建议
================================================================================

综合评分：
  - 资金面: 弱势
  - 技术面: N/A（QMT 数据不可用）

风险提示：
  - 本分析仅供参考，不构成投资建议
  - 投资有风险，入市需谨慎
  - 请结合其他因素综合判断

================================================================================
```

## 💡 最佳实践

1. **首次分析**：使用快速分析（5天）了解基本情况
2. **深入研究**：使用完整分析（10-30天）查看详细趋势
3. **长期趋势**：使用30-90天数据分析长期趋势
4. **风险控制**：结合多个指标综合判断，不要依赖单一指标

## ⚠️ 注意事项

1. **数据来源**：
   - AkShare 数据来自东方财富，可能有延迟
   - QMT 数据需要 QMT 环境支持

2. **数据范围**：
   - AkShare 资金流向数据最多 100-120 天
   - 超过 100 天的数据无法获取

3. **风险提示**：
   - 本分析仅供参考，不构成投资建议
   - 投资有风险，入市需谨慎
   - 请结合其他因素综合判断

## 📝 API 参考

### analyze_stock()

```python
def analyze_stock(stock_code, days=10, mode='full'):
    """
    分析个股（AI 便捷接口）

    Args:
        stock_code: 股票代码（如 '300997'）
        days: 分析最近几天（默认10天）
        mode: 分析模式
            - 'full': 完整分析
            - 'quick': 快速分析

    Returns:
        str: 分析报告
    """
```

### quick()

```python
def quick(stock_code, days=5):
    """
    快速分析（简洁版）

    Args:
        stock_code: 股票代码
        days: 分析天数

    Returns:
        str: 简洁的分析报告
    """
```

### ask_more_days()

```python
def ask_more_days(days=10):
    """
    询问用户是否需要更久的数据

    Args:
        days: 当前分析的天数

    Returns:
        str: 提示信息
    """
```

## 🎉 完成！

工具已经封装完成，现在可以方便地让 AI 调用了！