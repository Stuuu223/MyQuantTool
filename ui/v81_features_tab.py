"""
V8.1 æµåŠ¨æ€§ä¸çœŸé¾™è¯†åˆ«å±•ç¤ºé¡µé¢

åŠŸèƒ½ï¼š
1. æµåŠ¨æ€§é™·é˜±è¯†åˆ«ï¼ˆç¼©é‡æ‹‰å‡ï¼‰
2. çœŸé¾™è¯†åˆ«ï¼ˆåŒºåˆ†é¾™å¤´vsè·Ÿé£ï¼‰
3. é‡æ¯”BUGä¿®å¤å±•ç¤º
4. StrategyOrchestratorä¸€ç¥¨å¦å†³å±•ç¤º
"""

import streamlit as st
import pandas as pd
import numpy as np
import plotly.graph_objects as go
import plotly.express as px
from datetime import datetime
from typing import Dict, Any, List


def render_v81_features_tab(db, config):
    """æ¸²æŸ“V8.1æ–°åŠŸèƒ½æ ‡ç­¾é¡µ"""
    st.subheader("ğŸ¯ V8.1 æµåŠ¨æ€§ä¸çœŸé¾™è¯†åˆ« - ä»é‡æ¯”BUGåˆ°çœŸé¾™è¯†åˆ«")
    
    # åˆ›å»ºå››ä¸ªå­æ ‡ç­¾é¡µ
    tab1, tab2, tab3, tab4 = st.tabs([
        "ğŸ› é‡æ¯”BUGä¿®å¤",
        "âš ï¸ æµåŠ¨æ€§é™·é˜±è¯†åˆ«",
        "ğŸ‰ çœŸé¾™è¯†åˆ«ç³»ç»Ÿ",
        "ğŸš« ç­–ç•¥ä»²è£åº­ä¸€ç¥¨å¦å†³"
    ])
    
    # Tab 1: é‡æ¯”BUGä¿®å¤
    with tab1:
        st.markdown("### ğŸ› é‡æ¯”BUGä¿®å¤ (V8.1)")
        st.markdown("""
        **é—®é¢˜æ ¹æº**ï¼šæ‰‹æ•°vsè‚¡æ•°çš„å•ä½æ¢ç®—é—®é¢˜
        
        - **å†å²æ•°æ®**ï¼švolumeæ˜¯è‚¡æ•°ï¼ˆæ¥è‡ªakshareï¼‰
        - **å®æ—¶æ•°æ®**ï¼švolumeæ˜¯è‚¡æ•°ï¼ˆæ¥è‡ªeasyquotationï¼‰
        - **æ˜¾ç¤ºæ•°æ®**ï¼šæˆäº¤é‡æ˜¯æ‰‹æ•°ï¼ˆé™¤ä»¥100ï¼‰
        - **BUGç°è±¡**ï¼šé‡æ¯”è¢«æ”¾å¤§100å€ï¼ˆ12577å€ â†’ 125å€ï¼‰
        """)
        
        st.markdown("#### ğŸ“Š BUGä¿®å¤å‰åå¯¹æ¯”")
        
        # æ¨¡æ‹Ÿæ•°æ®
        col1, col2 = st.columns(2)
        
        with col1:
            st.markdown("##### ğŸ”´ ä¿®å¤å‰ï¼ˆé”™è¯¯ï¼‰")
            st.error("""
            **ç¥æ€ç”µå­ (300479)**
            - é‡æ¯”ï¼š12577.34å€ âŒ
            - è§£é‡Šï¼šä»Šå¤©çš„æˆäº¤é‡æ˜¯è¿‡å»5å¤©å¹³å‡çš„1.2ä¸‡å€
            - é—®é¢˜ï¼šç‰©ç†ä¸Šä¸å¯èƒ½
            - çœŸç›¸ï¼šå•ä½æ¢ç®—é”™è¯¯ï¼ˆæ”¾å¤§100å€ï¼‰
            """)
        
        with col2:
            st.markdown("##### ğŸŸ¢ ä¿®å¤åï¼ˆæ­£ç¡®ï¼‰")
            st.success("""
            **ç¥æ€ç”µå­ (300479)**
            - é‡æ¯”ï¼š125.77å€ âœ…
            - è§£é‡Šï¼šä»Šå¤©çš„æˆäº¤é‡æ˜¯è¿‡å»5å¤©å¹³å‡çš„125å€
            - çœŸç›¸ï¼šæ”»å‡»æ€§æ”¾é‡ï¼Œèµ„é‡‘æŠ¢ç­¹
            - è¯„ä»·ï¼šé‡æ¯”>50ï¼Œé‡å¤§åˆ©å¥½æˆ–ä¸€å­—æ¿
            """)
        
        st.markdown("#### ğŸ”§ ä¿®å¤æ–¹æ¡ˆ")
        st.info("""
        **ç»Ÿä¸€å•ä½æ¢ç®—**ï¼š
        ```python
        # å†å²æ•°æ®ï¼švolumeæ˜¯è‚¡æ•°ï¼Œéœ€è¦è½¬æ¢ä¸ºæ‰‹æ•°
        avg_volume = df['volume'].tail(5).mean() / 100  # è½¬æ¢ä¸ºæ‰‹æ•°
        
        # å®æ—¶æ•°æ®ï¼švolumeæ˜¯è‚¡æ•°ï¼Œä¹Ÿéœ€è¦è½¬æ¢ä¸ºæ‰‹æ•°
        current_volume = realtime_data.get('volume', 0) / 100  # è½¬æ¢ä¸ºæ‰‹æ•°
        
        # è®¡ç®—é‡æ¯”
        volume_ratio = current_volume / avg_volume
        ```
        
        **ä¿®å¤ä½ç½®**ï¼š
        - `algo.py` ç¬¬2652è¡Œï¼šé›†åˆç«ä»·æ‰«æ
        - `algo.py` ç¬¬2979è¡Œï¼šè¶‹åŠ¿è‚¡æ‰«æ
        - `algo.py` ç¬¬3263è¡Œï¼šåŠè·¯æ¿æ‰«æ
        - `algo.py` ç¬¬1475è¡Œï¼šé‡æ¯”è®¡ç®—
        """)
        
        # é‡æ¯”å¯è§†åŒ–
        st.markdown("#### ğŸ“ˆ é‡æ¯”åˆ†å¸ƒå¯è§†åŒ–")
        
        # æ¨¡æ‹Ÿé‡æ¯”æ•°æ®
        volume_ratios = np.random.lognormal(mean=1.5, sigma=0.8, size=100)
        volume_ratios = np.clip(volume_ratios, 0.5, 200)
        
        fig = px.histogram(
            x=volume_ratios,
            nbins=30,
            title="é‡æ¯”åˆ†å¸ƒï¼ˆä¿®å¤åï¼‰",
            labels={'x': 'é‡æ¯”', 'y': 'è‚¡ç¥¨æ•°é‡'}
        )
        
        # æ·»åŠ é˜ˆå€¼çº¿
        fig.add_vline(x=1.5, line_dash="dash", line_color="yellow", annotation_text="æ¸©å’Œæ”¾é‡")
        fig.add_vline(x=3.0, line_dash="dash", line_color="orange", annotation_text="æ”¾é‡")
        fig.add_vline(x=5.0, line_dash="dash", line_color="red", annotation_text="æ”»å‡»æ€§æ”¾é‡")
        fig.add_vline(x=50.0, line_dash="dash", line_color="purple", annotation_text="é‡å¤§åˆ©å¥½")
        
        st.plotly_chart(fig, use_container_width=True)
        
        st.markdown("""
        **é‡æ¯”è§£è¯»æ ‡å‡†**ï¼š
        - < 0.5ï¼šç¼©é‡ï¼Œèµ„é‡‘ä¸æ´»è·ƒ
        - 0.5 - 1.5ï¼šæ­£å¸¸é‡ï¼Œèµ°åŠ¿å¹³ç¨³
        - 1.5 - 3.0ï¼šæ¸©å’Œæ”¾é‡ï¼Œèµ„é‡‘æ´»è·ƒ
        - 3.0 - 5.0ï¼šæ”¾é‡ï¼Œèµ„é‡‘æŠ¢ç­¹
        - 5.0 - 50.0ï¼šæ”»å‡»æ€§æ”¾é‡ï¼Œå¼ºåŠ¿è‚¡
        - > 50.0ï¼šé‡å¤§åˆ©å¥½æˆ–ä¸€å­—æ¿
        """)
    
    # Tab 2: æµåŠ¨æ€§é™·é˜±è¯†åˆ«
    with tab2:
        st.markdown("### âš ï¸ æµåŠ¨æ€§é™·é˜±è¯†åˆ« (V8.1)")
        st.markdown("""
        **æ ¸å¿ƒé—®é¢˜**ï¼šç¼©é‡æ‹‰å‡é™·é˜±
        
        - **ç°è±¡**ï¼šæ¶¨å¹…å¾ˆå¤§ï¼Œä½†ç«ä»·é‡å¾ˆå°
        - **é£é™©**ï¼šä¸»åŠ›æ²¡æœ‰èŠ±å¤§é’±æ‹‰å‡ï¼Œå®¹æ˜“ç‚¸æ¿
        - **ç‰¹å¾**ï¼šç«ä»·é‡‘é¢<500ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦<2%ï¼Œæ¶¨å¹…>5%
        - **æ¡ˆä¾‹**ï¼šç¥æ€ç”µå­ï¼ˆ300479ï¼‰ç«ä»·é‡449æ‰‹ï¼ˆ104ä¸‡ï¼‰ï¼Œæ¶¨å¹…12.83%
        """)
        
        st.markdown("#### ğŸš¨ æµåŠ¨æ€§é™·é˜±æ¡ˆä¾‹")
        
        # æ¨¡æ‹Ÿç¥æ€ç”µå­æ•°æ®
        col1, col2, col3 = st.columns(3)
        
        with col1:
            st.metric("æœ€æ–°ä»·", "Â¥23.31", "+12.83%", delta_color="normal")
        
        with col2:
            st.metric("ç«ä»·é‡", "449æ‰‹", "æµåŠ¨æ€§ä¸è¶³", delta_color="inverse")
        
        with col3:
            st.metric("ç«ä»·é‡‘é¢", "Â¥104ä¸‡", "<500ä¸‡", delta_color="inverse")
        
        st.markdown("#### ğŸ“Š æµåŠ¨æ€§é™·é˜±åˆ¤å®šæ¡ä»¶")
        
        trap_conditions = pd.DataFrame({
            'æŒ‡æ ‡': ['ç«ä»·é‡‘é¢', 'ç«ä»·æŠ¢ç­¹åº¦', 'æ¶¨è·Œå¹…'],
            'é˜ˆå€¼': ['< 500ä¸‡', '< 2%', '> 5%'],
            'ç¥æ€ç”µå­': ['104ä¸‡ âŒ', '1.12% âŒ', '12.83% âœ…'],
            'åˆ¤å®š': ['æµåŠ¨æ€§ä¸è¶³', 'ä¸»åŠ›æœªæŠ¢ç­¹', 'çœ‹ä¼¼å¼ºåŠ¿'],
            'ç»“è®º': ['âš ï¸ ç¼©é‡æ‹‰å‡é™·é˜±', 'âš ï¸ ç¼©é‡æ‹‰å‡é™·é˜±', 'âš ï¸ ç¼©é‡æ‹‰å‡é™·é˜±']
        })
        
        st.dataframe(trap_conditions, use_container_width=True)
        
        st.markdown("#### ğŸ” æµåŠ¨æ€§é™·é˜±è¯†åˆ«é€»è¾‘")
        st.code("""
def detect_liquidity_trap(auction_amount, auction_ratio, change_pct, ask1_price, seal_amount):
    \"\"\"
    æµåŠ¨æ€§é™·é˜±æ£€æµ‹
    
    Args:
        auction_amount: ç«ä»·é‡‘é¢ï¼ˆä¸‡å…ƒï¼‰
        auction_ratio: ç«ä»·æŠ¢ç­¹åº¦
        change_pct: æ¶¨è·Œå¹…ï¼ˆ%ï¼‰
        ask1_price: å–ä¸€ä»·
        seal_amount: å°å•é‡‘é¢ï¼ˆä¸‡å…ƒï¼‰
    
    Returns:
        tuple: (æ˜¯å¦é™·é˜±, åŸå› )
    \"\"\"
    # æµåŠ¨æ€§é™·é˜±æ¡ä»¶
    is_trap = auction_amount < 500 and auction_ratio < 0.02 and change_pct > 5
    
    # ğŸ†• V8.2: è±å…é€»è¾‘ - ç»å¯¹ä¸€å­—æ¿é¾™å¤´ï¼ˆThe Absolute One-Word Boardï¼‰
    # è±å…æ¡ä»¶ï¼šå¦‚æœæ˜¯"ä¸€å­—æ¶¨åœ"ä¸”"å°å•å·¨å¤§"ï¼ˆå°å•é¢>1äº¿ï¼‰
    is_super_one_word = (ask1_price == 0 and change_pct >= 19.5 and seal_amount > 10000)
    
    if is_trap and is_super_one_word:
        return False, f"âœ… è±å…ï¼šç¼©é‡ä¸€å­—æ¿çœŸé¾™ï¼ˆå°å•é‡‘é¢{seal_amount:.0f}ä¸‡>1äº¿ï¼‰"
    elif is_trap:
        return True, f"âš ï¸ æµåŠ¨æ€§é™·é˜±ï¼šç«ä»·é‡‘é¢{auction_amount:.0f}ä¸‡<500ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦{auction_ratio*100:.2f}%<2%ï¼Œç¼©é‡æ‹‰å‡"
    
    return False, ""
        """, language='python')
        
        st.markdown("#### ğŸ†• V8.2: ä¸€å­—æ¿é¾™å¤´è±å…é€»è¾‘")
        st.info("""
        **ç»å¯¹ä¸€å­—æ¿é¾™å¤´ï¼ˆThe Absolute One-Word Boardï¼‰è±å…**
        
        **åœºæ™¯**ï¼šæŸåªè¶…çº§åˆ©å¥½è‚¡ï¼ˆå¦‚é‡ç»„å¤ç‰Œï¼‰ï¼Œå¼€ç›˜ç›´æ¥20cmä¸€å­—æ¶¨åœ
        
        **ç‰¹å¾**ï¼š
        - æ¶¨å¹…ï¼š+20%
        - ç«ä»·æˆäº¤é¢ï¼šå¯èƒ½æå°ï¼ˆæ¯”å¦‚åªæœ‰50ä¸‡ï¼‰ï¼Œå› ä¸ºæ²¡äººå–ï¼
        - ç«ä»·æŠ¢ç­¹åº¦ï¼šå¯èƒ½æé«˜ï¼ˆä¹°ä¸€å°å•å·¨å¤§ï¼‰ï¼Œä½†å®é™…æ¢æ‰‹ç‡æä½
        
        **è±å…æ¡ä»¶**ï¼š
        - ä¸€å­—æ¶¨åœï¼šå–ä¸€ä»·=0 ä¸” æ¶¨å¹…>=19.5%
        - å°å•å·¨å¤§ï¼šå°å•é‡‘é¢>1äº¿ï¼ˆä¹°ä¸€é‡*ä»·æ ¼ï¼‰
        
        **è±å…åŸå› **ï¼š
        - è¿™ç§æƒ…å†µé€šå¸¸æ˜¯é‡ç»„å¤ç‰Œç­‰è¶…çº§åˆ©å¥½ï¼Œä¹°éƒ½ä¹°ä¸åˆ°
        - ä¸æ˜¯æµåŠ¨æ€§é™·é˜±ï¼Œè€Œæ˜¯"ä¹°ä¸åˆ°çš„æœ€å¼ºé¾™"
        - å¦‚æœä¸åŠ è±å…ï¼Œä¼šé”™è¿‡æœ€å¼ºçš„è¿æ¿ç¥¨
        
        **æ¡ˆä¾‹**ï¼šæŸé‡ç»„å¤ç‰Œè‚¡ï¼Œç«ä»·æˆäº¤é¢50ä¸‡ï¼Œå°å•é‡‘é¢2äº¿ï¼Œå¼€ç›˜ä¸€å­—æ¶¨åœ
        """)
        
        st.markdown("#### ğŸ“Š æµåŠ¨æ€§é™·é˜±vsæ­£å¸¸å¼ºåŠ¿è‚¡vsä¸€å­—æ¿é¾™å¤´å¯¹æ¯”")
        
        # æ¨¡æ‹Ÿå¯¹æ¯”æ•°æ®
        comparison_data = pd.DataFrame({
            'è‚¡ç¥¨': ['ç¥æ€ç”µå­ï¼ˆé™·é˜±ï¼‰', 'ä¸‡ä¸°å¥¥å¨ï¼ˆçœŸé¾™ï¼‰', 'ä¸­ä¿¡æµ·ç›´ï¼ˆçœŸé¾™ï¼‰', 'æŸé‡ç»„å¤ç‰Œï¼ˆä¸€å­—æ¿é¾™å¤´ï¼‰'],
            'æœ€æ–°ä»·': ['Â¥23.31', 'Â¥18.50', 'Â¥15.20', 'Â¥30.00'],
            'æ¶¨è·Œå¹…': ['+12.83%', '+10.50%', '+9.80%', '+20.00%'],
            'ç«ä»·é‡': ['449æ‰‹', '5000æ‰‹', '4500æ‰‹', '100æ‰‹'],
            'ç«ä»·é‡‘é¢': ['Â¥104ä¸‡', 'Â¥925ä¸‡', 'Â¥684ä¸‡', 'Â¥30ä¸‡'],
            'ç«ä»·æŠ¢ç­¹åº¦': ['1.12%', '3.50%', '2.80%', '0.50%'],
            'å°å•é‡‘é¢': ['Â¥0ä¸‡', 'Â¥0ä¸‡', 'Â¥0ä¸‡', 'Â¥20000ä¸‡'],
            'æˆäº¤é¢': ['Â¥2000ä¸‡', 'Â¥8000ä¸‡', 'Â¥6500ä¸‡', 'Â¥300ä¸‡'],
            'æµåŠ¨æ€§é™·é˜±': ['âš ï¸ æ˜¯', 'âœ… å¦', 'âœ… å¦', 'âœ… è±å…'],
            'æ“ä½œå»ºè®®': ['âŒ ä¸ä¹°', 'âœ… ä¹°å…¥', 'âœ… ä¹°å…¥', 'âœ… ä¹°å…¥ï¼ˆä¸€å­—æ¿ï¼‰']
        })
        
        st.dataframe(comparison_data, use_container_width=True)
        
        # æµåŠ¨æ€§é™·é˜±å¯è§†åŒ–
        st.markdown("#### ğŸ“Š ç«ä»·é‡‘é¢vsæ¶¨è·Œå¹…æ•£ç‚¹å›¾")
        
        # æ¨¡æ‹Ÿæ•£ç‚¹æ•°æ®
        np.random.seed(42)
        n_stocks = 50
        pct_changes = np.random.uniform(0, 20, n_stocks)
        auction_amounts = np.random.uniform(100, 2000, n_stocks)
        
        # æ·»åŠ ä¸€äº›æµåŠ¨æ€§é™·é˜±
        trap_indices = np.random.choice(n_stocks, 10, replace=False)
        auction_amounts[trap_indices] = np.random.uniform(100, 500, 10)
        pct_changes[trap_indices] = np.random.uniform(5, 15, 10)
        
        # æ·»åŠ ä¸€äº›çœŸé¾™
        dragon_indices = np.random.choice([i for i in range(n_stocks) if i not in trap_indices], 5, replace=False)
        auction_amounts[dragon_indices] = np.random.uniform(1500, 2000, 5)
        pct_changes[dragon_indices] = np.random.uniform(8, 15, 5)
        
        # ğŸ†• V8.2: æ·»åŠ ä¸€å­—æ¿é¾™å¤´
        oneword_indices = np.random.choice([i for i in range(n_stocks) if i not in trap_indices and i not in dragon_indices], 3, replace=False)
        auction_amounts[oneword_indices] = np.random.uniform(30, 100, 3)
        pct_changes[oneword_indices] = np.random.uniform(19, 20, 3)
        
        # æ ‡è®°
        labels = ['æ­£å¸¸'] * n_stocks
        for i in trap_indices:
            labels[i] = 'æµåŠ¨æ€§é™·é˜±'
        for i in dragon_indices:
            labels[i] = 'çœŸé¾™'
        for i in oneword_indices:
            labels[i] = 'ä¸€å­—æ¿é¾™å¤´'
        
        df_scatter = pd.DataFrame({
            'æ¶¨è·Œå¹…': pct_changes,
            'ç«ä»·é‡‘é¢': auction_amounts,
            'ç±»å‹': labels
        })
        
        fig = px.scatter(
            df_scatter,
            x='æ¶¨è·Œå¹…',
            y='ç«ä»·é‡‘é¢',
            color='ç±»å‹',
            title='ç«ä»·é‡‘é¢vsæ¶¨è·Œå¹…ï¼ˆè¯†åˆ«æµåŠ¨æ€§é™·é˜±å’Œä¸€å­—æ¿é¾™å¤´ï¼‰',
            color_discrete_map={
                'æ­£å¸¸': 'blue',
                'æµåŠ¨æ€§é™·é˜±': 'red',
                'çœŸé¾™': 'green',
                'ä¸€å­—æ¿é¾™å¤´': 'purple'
            }
        )
        
        # æ·»åŠ é˜ˆå€¼çº¿
        fig.add_hline(y=500, line_dash="dash", line_color="red", annotation_text="500ä¸‡é˜ˆå€¼")
        fig.add_vline(x=5, line_dash="dash", line_color="orange", annotation_text="5%é˜ˆå€¼")
        fig.add_vline(x=19.5, line_dash="dash", line_color="purple", annotation_text="19.5%ä¸€å­—æ¿")
        
        st.plotly_chart(fig, use_container_width=True)
        
        st.markdown("""
        **è§£è¯»**ï¼š
        - **çº¢è‰²åŒºåŸŸ**ï¼ˆç«ä»·é‡‘é¢<500ä¸‡ ä¸” æ¶¨å¹…>5%ï¼‰ï¼šæµåŠ¨æ€§é™·é˜±ï¼Œä¸ä¹°
        - **ç»¿è‰²åŒºåŸŸ**ï¼ˆç«ä»·é‡‘é¢>1500ä¸‡ ä¸” æ¶¨å¹…>8%ï¼‰ï¼šçœŸé¾™ï¼Œä¹°å…¥
        - **ç´«è‰²åŒºåŸŸ**ï¼ˆæ¶¨å¹…>19.5%ï¼‰ï¼šä¸€å­—æ¿é¾™å¤´ï¼Œè±å…æµåŠ¨æ€§é™·é˜±ï¼Œä¹°å…¥
        - **è“è‰²åŒºåŸŸ**ï¼šæ­£å¸¸è§‚å¯Ÿ
        """)
    
    # Tab 3: çœŸé¾™è¯†åˆ«ç³»ç»Ÿ
    with tab3:
        st.markdown("### ğŸ‰ çœŸé¾™è¯†åˆ«ç³»ç»Ÿ (V8.1)")
        st.markdown("""
        **æ ¸å¿ƒç›®æ ‡**ï¼šåŒºåˆ†é¾™å¤´vsè·Ÿé£
        
        - **çœŸé¾™**ï¼šæˆäº¤é¢>5000ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦>2%ï¼Œæ¶¨å¹…>10%
        - **å¼ºè·Ÿé£**ï¼šæˆäº¤é¢>2000ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦>1%ï¼Œæ¶¨å¹…>8%
        - **å¼±è·Ÿé£**ï¼šæˆäº¤é¢<2000ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦<1%
        - **æ‚æ¯›**ï¼šæˆäº¤é¢<500ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦<1%
        """)
        
        st.markdown("#### ğŸ‰ çœŸé¾™è¯†åˆ«æ ‡å‡†")
        
        dragon_standards = pd.DataFrame({
            'ç±»å‹': ['ğŸ‰ çœŸé¾™', 'ğŸ² å¼ºè·Ÿé£', 'ğŸ¦† å¼±è·Ÿé£', 'ğŸ› æ‚æ¯›'],
            'æˆäº¤é¢': ['> 5000ä¸‡', '> 2000ä¸‡', '< 2000ä¸‡', '< 500ä¸‡'],
            'ç«ä»·æŠ¢ç­¹åº¦': ['> 2%', '> 1%', '< 1%', '< 1%'],
            'æ¶¨å¹…': ['> 10%', '> 8%', 'ä»»æ„', 'ä»»æ„'],
            'æ“ä½œå»ºè®®': ['âœ… ä¹°å…¥', 'âš ï¸ è§‚å¯Ÿåä¹°å…¥', 'âŒ ä¸ä¹°', 'âŒ ä¸ä¹°'],
            'è¯„åˆ†å½±å“': ['+30åˆ†', '+10åˆ†', '-5åˆ†', '-20åˆ†']
        })
        
        st.dataframe(dragon_standards, use_container_width=True)
        
        st.markdown("#### ğŸ” çœŸé¾™è¯†åˆ«é€»è¾‘")
        st.code("""
def identify_dragon_type(current_turnover, auction_ratio, change_pct):
    \"\"\"
    çœŸé¾™è¯†åˆ«
    
    Args:
        current_turnover: å½“å‰æˆäº¤é¢ï¼ˆä¸‡å…ƒï¼‰
        auction_ratio: ç«ä»·æŠ¢ç­¹åº¦
        change_pct: æ¶¨è·Œå¹…ï¼ˆ%ï¼‰
    
    Returns:
        tuple: (ç±»å‹, åŸå› )
    \"\"\"
    if current_turnover > 5000 and auction_ratio > 0.02 and change_pct > 10:
        return "ğŸ‰ çœŸé¾™", f"âœ… æˆäº¤é¢{current_turnover:.0f}ä¸‡>5000ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦{auction_ratio*100:.2f}%>2%ï¼ŒçœŸé¾™ç‰¹å¾"
    elif current_turnover > 2000 and auction_ratio > 0.01 and change_pct > 8:
        return "ğŸ² å¼ºè·Ÿé£", f"âš ï¸ æˆäº¤é¢{current_turnover:.0f}ä¸‡>2000ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦{auction_ratio*100:.2f}%>1%ï¼Œå¼ºè·Ÿé£"
    elif current_turnover < 500 or auction_ratio < 0.01:
        return "ğŸ› æ‚æ¯›", f"âŒ æˆäº¤é¢{current_turnover:.0f}ä¸‡<500ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦{auction_ratio*100:.2f}%<1%ï¼Œæ‚æ¯›"
    else:
        return "ğŸ¦† å¼±è·Ÿé£", f"âš ï¸ æˆäº¤é¢{current_turnover:.0f}ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦{auction_ratio*100:.2f}%ï¼Œå¼±è·Ÿé£"
        """, language='python')
        
        st.markdown("#### ğŸ“Š çœŸé¾™vsè·Ÿé£vsæ‚æ¯›å¯¹æ¯”")
        
        # æ¨¡æ‹Ÿå¯¹æ¯”æ•°æ®
        dragon_comparison = pd.DataFrame({
            'è‚¡ç¥¨': ['ä¸‡ä¸°å¥¥å¨ï¼ˆçœŸé¾™ï¼‰', 'ä¸­ä¿¡æµ·ç›´ï¼ˆçœŸé¾™ï¼‰', 'ç¥æ€ç”µå­ï¼ˆæ‚æ¯›ï¼‰', 'æŸè·Ÿé£è‚¡ï¼ˆå¼±è·Ÿé£ï¼‰'],
            'æœ€æ–°ä»·': ['Â¥18.50', 'Â¥15.20', 'Â¥23.31', 'Â¥12.50'],
            'æ¶¨è·Œå¹…': ['+10.50%', '+9.80%', '+12.83%', '+7.50%'],
            'æˆäº¤é¢': ['Â¥8000ä¸‡', 'Â¥6500ä¸‡', 'Â¥2000ä¸‡', 'Â¥1500ä¸‡'],
            'ç«ä»·æŠ¢ç­¹åº¦': ['3.50%', '2.80%', '1.12%', '0.80%'],
            'çœŸé¾™ç±»å‹': ['ğŸ‰ çœŸé¾™', 'ğŸ‰ çœŸé¾™', 'ğŸ› æ‚æ¯›', 'ğŸ¦† å¼±è·Ÿé£'],
            'æ“ä½œå»ºè®®': ['âœ… ä¹°å…¥', 'âœ… ä¹°å…¥', 'âŒ ä¸ä¹°', 'âŒ ä¸ä¹°'],
            'è¯„åˆ†å½±å“': ['+30åˆ†', '+30åˆ†', '-20åˆ†', '-5åˆ†']
        })
        
        st.dataframe(dragon_comparison, use_container_width=True)
        
        # çœŸé¾™è¯†åˆ«å¯è§†åŒ–
        st.markdown("#### ğŸ“Š æˆäº¤é¢vsç«ä»·æŠ¢ç­¹åº¦æ•£ç‚¹å›¾")
        
        # æ¨¡æ‹Ÿæ•£ç‚¹æ•°æ®
        np.random.seed(43)
        n_dragons = 60
        turnovers = np.random.uniform(500, 10000, n_dragons)
        auction_ratios = np.random.uniform(0.5, 5.0, n_dragons)
        
        # æ ‡è®°
        dragon_labels = []
        for i in range(n_dragons):
            if turnovers[i] > 5000 and auction_ratios[i] > 2:
                dragon_labels.append('ğŸ‰ çœŸé¾™')
            elif turnovers[i] > 2000 and auction_ratios[i] > 1:
                dragon_labels.append('ğŸ² å¼ºè·Ÿé£')
            elif turnovers[i] < 500 or auction_ratios[i] < 1:
                dragon_labels.append('ğŸ› æ‚æ¯›')
            else:
                dragon_labels.append('ğŸ¦† å¼±è·Ÿé£')
        
        df_dragon_scatter = pd.DataFrame({
            'æˆäº¤é¢': turnovers,
            'ç«ä»·æŠ¢ç­¹åº¦': auction_ratios,
            'çœŸé¾™ç±»å‹': dragon_labels
        })
        
        fig = px.scatter(
            df_dragon_scatter,
            x='æˆäº¤é¢',
            y='ç«ä»·æŠ¢ç­¹åº¦',
            color='çœŸé¾™ç±»å‹',
            title='æˆäº¤é¢vsç«ä»·æŠ¢ç­¹åº¦ï¼ˆçœŸé¾™è¯†åˆ«ï¼‰',
            color_discrete_map={
                'ğŸ‰ çœŸé¾™': 'green',
                'ğŸ² å¼ºè·Ÿé£': 'blue',
                'ğŸ¦† å¼±è·Ÿé£': 'orange',
                'ğŸ› æ‚æ¯›': 'red'
            }
        )
        
        # æ·»åŠ é˜ˆå€¼çº¿
        fig.add_vline(x=5000, line_dash="dash", line_color="green", annotation_text="5000ä¸‡")
        fig.add_vline(x=2000, line_dash="dash", line_color="blue", annotation_text="2000ä¸‡")
        fig.add_vline(x=500, line_dash="dash", line_color="red", annotation_text="500ä¸‡")
        fig.add_hline(y=2, line_dash="dash", line_color="green", annotation_text="2%")
        fig.add_hline(y=1, line_dash="dash", line_color="blue", annotation_text="1%")
        
        st.plotly_chart(fig, use_container_width=True)
        
        st.markdown("""
        **è§£è¯»**ï¼š
        - **ç»¿è‰²åŒºåŸŸ**ï¼ˆæˆäº¤é¢>5000ä¸‡ ä¸” ç«ä»·æŠ¢ç­¹åº¦>2%ï¼‰ï¼šçœŸé¾™ï¼Œä¹°å…¥
        - **è“è‰²åŒºåŸŸ**ï¼ˆæˆäº¤é¢>2000ä¸‡ ä¸” ç«ä»·æŠ¢ç­¹åº¦>1%ï¼‰ï¼šå¼ºè·Ÿé£ï¼Œè§‚å¯Ÿåä¹°å…¥
        - **æ©™è‰²åŒºåŸŸ**ï¼šå¼±è·Ÿé£ï¼Œä¸ä¹°
        - **çº¢è‰²åŒºåŸŸ**ï¼ˆæˆäº¤é¢<500ä¸‡ æˆ– ç«ä»·æŠ¢ç­¹åº¦<1%ï¼‰ï¼šæ‚æ¯›ï¼Œä¸ä¹°
        """)
    
    # Tab 4: ç­–ç•¥ä»²è£åº­ä¸€ç¥¨å¦å†³
    with tab4:
        st.markdown("### ğŸš« ç­–ç•¥ä»²è£åº­ä¸€ç¥¨å¦å†³ (V8.2)")
        st.markdown("""
        **æ ¸å¿ƒåŠŸèƒ½**ï¼šæµåŠ¨æ€§ä¸è¶³çš„ä¸€ç¥¨å¦å†³
        
        - **æµåŠ¨æ€§é™·é˜±**ï¼šç¼©é‡æ‹‰å‡ï¼Œä¸€ç¥¨å¦å†³
        - **æ‚æ¯›è‚¡**ï¼šæˆäº¤é¢<500ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦<1%ï¼Œä¸€ç¥¨å¦å†³
        - **å¼±è·Ÿé£**ï¼šæˆäº¤é¢<2000ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦<1%ï¼Œä¸€ç¥¨å¦å†³
        - **ğŸ†• V8.2 è±å…**ï¼šä¸€å­—æ¿é¾™å¤´ï¼ˆå°å•é‡‘é¢>1äº¿ï¼‰ï¼Œè±å…æµåŠ¨æ€§é™·é˜±
        """)
        
        st.markdown("#### ğŸ›¡ï¸ ä¸€ç¥¨å¦å†³è§„åˆ™")
        
        veto_rules = pd.DataFrame({
            'å¦å†³ç±»å‹': ['æµåŠ¨æ€§é™·é˜±', 'æ‚æ¯›è‚¡', 'å¼±è·Ÿé£', 'ä¸€å­—æ¿é¾™å¤´è±å…'],
            'è§¦å‘æ¡ä»¶': ['ç«ä»·é‡‘é¢<500ä¸‡ ä¸” ç«ä»·æŠ¢ç­¹åº¦<2% ä¸” æ¶¨å¹…>5%', 'æˆäº¤é¢<500ä¸‡ æˆ– ç«ä»·æŠ¢ç­¹åº¦<1%', 'æˆäº¤é¢<2000ä¸‡ æˆ– ç«ä»·æŠ¢ç­¹åº¦<1%', 'ä¸€å­—æ¶¨åœ ä¸” å°å•é‡‘é¢>1äº¿'],
            'å¦å†³åŠ¨ä½œ': ['ä¸€ç¥¨å¦å†³', 'ä¸€ç¥¨å¦å†³', 'ä¸€ç¥¨å¦å†³', 'è±å…'],
            'æ¡ˆä¾‹': ['ç¥æ€ç”µå­ï¼ˆ300479ï¼‰', 'æŸå°ç›˜è‚¡', 'æŸè·Ÿé£è‚¡', 'æŸé‡ç»„å¤ç‰Œè‚¡'],
            'æ“ä½œå»ºè®®': ['âŒ ä¸ä¹°', 'âŒ ä¸ä¹°', 'âŒ ä¸ä¹°', 'âœ… ä¹°å…¥']
        })
        
        st.dataframe(veto_rules, use_container_width=True)
        
        st.markdown("#### ğŸ”„ å†³ç­–æµç¨‹")
        st.code("""
def final_judgement(stock_signal, market_status, theme_info):
    \"\"\"
    æœ€ç»ˆè£å†³æµç¨‹
    
    1. ä¸€ç¥¨å¦å†³æƒæ£€æŸ¥
       - é€€æ½®æœŸä¸€ç¥¨å¦å†³ï¼ˆé™¤éåæ ¸ï¼‰
       - é«˜æ½®æœŸä¸€ç¥¨å¦å†³æ‰“æ¿
       - STè‚¡ç¥¨ä¸€ç¥¨å¦å†³
       - æµåŠ¨æ€§é™·é˜±ä¸€ç¥¨å¦å†³ï¼ˆV8.1ï¼‰
       - æ‚æ¯›è‚¡ä¸€ç¥¨å¦å†³ï¼ˆV8.1ï¼‰
       - å¼±è·Ÿé£ä¸€ç¥¨å¦å†³ï¼ˆV8.1ï¼‰
       - ğŸ†• V8.2: ä¸€å­—æ¿é¾™å¤´è±å…
    
    2. æ—¥å†…å¼±è½¬å¼ºæ£€æµ‹ï¼ˆV9.0ï¼‰
       - æ£€æµ‹ç«ä»·å¼±ä½†å¼€ç›˜åæ‰¿æ¥å¼ºçš„æœºä¼š
       - ä¿®æ­£è¯„åˆ†+20~+50åˆ†
    
    3. åŠ æƒæ‰“åˆ†
       - å¸‚åœºç¯å¢ƒå¾—åˆ†ï¼ˆ50%ï¼‰
       - æ¿å—åœ°ä½å¾—åˆ†ï¼ˆ30%ï¼‰
       - ä¸ªè‚¡æŠ€æœ¯é¢å¾—åˆ†ï¼ˆ20%ï¼‰
    
    4. è¾“å‡ºå†³ç­–
       - BUY: ç»¼åˆå¾—åˆ†>=80ï¼Œå»ºè®®ä¹°å…¥
       - BUY: ç»¼åˆå¾—åˆ†>=60ï¼Œå»ºè®®è½»ä»“ä¹°å…¥
       - WAIT: ç»¼åˆå¾—åˆ†>=40ï¼Œå»ºè®®è§‚æœ›
       - REJECT: ç»¼åˆå¾—åˆ†<40ï¼Œå»ºè®®æ”¾å¼ƒ
    \"\"\"
        """, language='python')
        
        st.markdown("#### ğŸš¨ æ¡ˆä¾‹å±•ç¤ºï¼šä¸€å­—æ¿é¾™å¤´è±å…")
        
        col1, col2, col3 = st.columns(3)
        
        with col1:
            st.metric("æœ€æ–°ä»·", "Â¥30.00", "+20.00%", delta_color="normal")
        
        with col2:
            st.metric("ç«ä»·é‡‘é¢", "Â¥30ä¸‡", "çœ‹ä¼¼æµåŠ¨æ€§ä¸è¶³", delta_color="inverse")
        
        with col3:
            st.metric("å°å•é‡‘é¢", "Â¥20000ä¸‡", "å°å•å·¨å¤§", delta_color="normal")
        
        st.markdown("""
        **åˆ¤å®šè¿‡ç¨‹**ï¼š
        1. æ£€æµ‹åˆ°ç«ä»·é‡‘é¢<500ä¸‡ï¼Œè§¦å‘æµåŠ¨æ€§é™·é˜±æ£€æµ‹
        2. æ£€æµ‹åˆ°ä¸€å­—æ¶¨åœï¼ˆå–ä¸€ä»·=0ï¼Œæ¶¨å¹…=20%ï¼‰
        3. æ£€æµ‹åˆ°å°å•é‡‘é¢>1äº¿ï¼ˆ2äº¿ï¼‰
        4. è§¦å‘ä¸€å­—æ¿é¾™å¤´è±å…
        5. ä¸è¿›è¡Œä¸€ç¥¨å¦å†³ï¼Œå…è®¸ä¹°å…¥
        
        **è±å…åŸå› **ï¼š
        - é‡ç»„å¤ç‰Œç­‰è¶…çº§åˆ©å¥½ï¼Œä¹°éƒ½ä¹°ä¸åˆ°
        - ä¸æ˜¯æµåŠ¨æ€§é™·é˜±ï¼Œè€Œæ˜¯"ä¹°ä¸åˆ°çš„æœ€å¼ºé¾™"
        - å¦‚æœä¸åŠ è±å…ï¼Œä¼šé”™è¿‡æœ€å¼ºçš„è¿æ¿ç¥¨
        """)
        - **å¼±è·Ÿé£**ï¼šæˆäº¤é¢<2000ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦<1%ï¼Œä¸€ç¥¨å¦å†³
        - **é€€æ½®æœŸ**ï¼šä¸¥ç¦æ¥åŠ›ï¼ˆé™¤éåæ ¸ï¼‰ï¼Œä¸€ç¥¨å¦å†³
        - **é«˜æ½®æœŸ**ï¼šç¦æ­¢æ‰“æ¿æ¥åŠ›ï¼Œä¸€ç¥¨å¦å†³
        - **STè‚¡**ï¼šä¸€ç¥¨å¦å†³
        """)
        
        st.markdown("#### ğŸš« ä¸€ç¥¨å¦å†³è§„åˆ™")
        
        veto_rules = pd.DataFrame({
            'å¦å†³ç±»å‹': ['æµåŠ¨æ€§é™·é˜±', 'æ‚æ¯›è‚¡', 'å¼±è·Ÿé£', 'é€€æ½®æœŸ', 'é«˜æ½®æœŸ', 'STè‚¡'],
            'åˆ¤å®šæ¡ä»¶': [
                'ç«ä»·é‡‘é¢<500ä¸‡ ä¸” ç«ä»·æŠ¢ç­¹åº¦<2% ä¸” æ¶¨å¹…>5%',
                'æˆäº¤é¢<500ä¸‡ æˆ– ç«ä»·æŠ¢ç­¹åº¦<1%',
                'æˆäº¤é¢<2000ä¸‡ æˆ– ç«ä»·æŠ¢ç­¹åº¦<1%',
                'å¸‚åœºå‘¨æœŸ=é€€æ½®æœŸ ä¸” ä¸æ˜¯åæ ¸æ¨¡å¼',
                'å¸‚åœºå‘¨æœŸ=é«˜æ½®æœŸ ä¸” æ˜¯æ¶¨åœæ¿',
                'è‚¡ç¥¨ä»£ç åŒ…å«STæˆ–*ST'
            ],
            'å¦å†³åŸå› ': [
                'ç¼©é‡æ‹‰å‡ï¼Œå¤§èµ„é‡‘è¿›å‡ºå›°éš¾',
                'ä¸å…·å¤‡æ“ä½œä»·å€¼',
                'è·Ÿé£ä»·å€¼ä½',
                'é€€æ½®æœŸä¸¥ç¦æ¥åŠ›',
                'æƒ…ç»ªé«˜æ½®æ—¥ï¼Œç¦æ­¢æ‰“æ¿',
                'ST/é€€å¸‚é£é™©è‚¡'
            ],
            'ä¾‹å¤–æƒ…å†µ': ['æ— ', 'æ— ', 'æ— ', 'åæ ¸æ¨¡å¼', 'æ— ', 'æ— ']
        })
        
        st.dataframe(veto_rules, use_container_width=True)
        
        st.markdown("#### ğŸ” ä¸€ç¥¨å¦å†³é€»è¾‘")
        st.code("""
def check_veto_power(stock_signal, market_status):
    \"\"\"
    ä¸€ç¥¨å¦å†³æƒæ£€æŸ¥
    
    Args:
        stock_signal: ä¸ªè‚¡ä¿¡å·
            {
                'code': str,
                'is_anti_nuclear': bool,
                'is_limit_up': bool,
                'turnover': float,  # æˆäº¤é¢ï¼ˆä¸‡å…ƒï¼‰
                'auction_ratio': float,  # ç«ä»·æŠ¢ç­¹åº¦
                'liquidity_trap': bool,  # æµåŠ¨æ€§é™·é˜±æ ‡è®°
                'dragon_type': str  # çœŸé¾™ç±»å‹
            }
        market_status: å¸‚åœºçŠ¶æ€
    
    Returns:
        tuple: (æ˜¯å¦å¦å†³, å¦å†³åŸå› )
    \"\"\"
    market_cycle = market_status.get('cycle', '')
    
    # 1. é€€æ½®æœŸä¸€ç¥¨å¦å†³ï¼ˆé™¤éæ˜¯åæ ¸æ¨¡å¼ï¼‰
    if market_cycle == 'DECLINE':
        is_anti_nuclear = stock_signal.get('is_anti_nuclear', False)
        if not is_anti_nuclear:
            return True, "ğŸš« é€€æ½®æœŸä¸¥ç¦æ¥åŠ›ï¼Œé™¤éæ˜¯åæ ¸æ¨¡å¼"
    
    # 2. é«˜æ½®æœŸä¸€ç¥¨å¦å†³æ‰“æ¿
    if market_cycle == 'BOOM':
        is_limit_up = stock_signal.get('is_limit_up', False)
        if is_limit_up:
            return True, "ğŸš« æƒ…ç»ªé«˜æ½®æ—¥ï¼Œç¦æ­¢æ‰“æ¿æ¥åŠ›ï¼Œåªå–ä¸ä¹°"
    
    # 3. STè‚¡ç¥¨ä¸€ç¥¨å¦å†³
    stock_code = stock_signal.get('code', '')
    if 'ST' in stock_code or '*ST' in stock_code:
        return True, "ğŸš« ST/é€€å¸‚é£é™©è‚¡ï¼Œä¸€ç¥¨å¦å†³"
    
    # 4. æµåŠ¨æ€§é™·é˜±ä¸€ç¥¨å¦å†³
    liquidity_trap = stock_signal.get('liquidity_trap', False)
    if liquidity_trap:
        return True, f"ğŸš« æµåŠ¨æ€§é™·é˜±ï¼šç¼©é‡æ‹‰å‡ï¼Œå¤§èµ„é‡‘è¿›å‡ºå›°éš¾"
    
    # 5. æ‚æ¯›ä¸€ç¥¨å¦å†³
    dragon_type = stock_signal.get('dragon_type', '')
    turnover = stock_signal.get('turnover', 0)
    auction_ratio = stock_signal.get('auction_ratio', 0)
    
    if dragon_type == "ğŸ› æ‚æ¯›":
        return True, f"ğŸš« æ‚æ¯›è‚¡ï¼šæˆäº¤é¢{turnover:.0f}ä¸‡<500ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦{auction_ratio*100:.2f}%<1%ï¼Œä¸å…·å¤‡æ“ä½œä»·å€¼"
    
    # 6. å¼±è·Ÿé£ä¸€ç¥¨å¦å†³
    if dragon_type == "ğŸ¦† å¼±è·Ÿé£":
        return True, f"ğŸš« å¼±è·Ÿé£ï¼šæˆäº¤é¢{turnover:.0f}ä¸‡<2000ä¸‡æˆ–ç«ä»·æŠ¢ç­¹åº¦{auction_ratio*100:.2f}%<1%ï¼Œè·Ÿé£ä»·å€¼ä½"
    
    return False, ""
        """, language='python')
        
        st.markdown("#### ğŸ“Š ä¸€ç¥¨å¦å†³æ¡ˆä¾‹")
        
        # æ¨¡æ‹Ÿæ¡ˆä¾‹æ•°æ®
        veto_cases = pd.DataFrame({
            'è‚¡ç¥¨': ['ç¥æ€ç”µå­', 'æŸSTè‚¡', 'æŸé€€æ½®æœŸè‚¡', 'æŸé«˜æ½®æœŸè‚¡', 'æŸæ‚æ¯›è‚¡', 'æŸå¼±è·Ÿé£è‚¡'],
            'å¸‚åœºå‘¨æœŸ': ['ä¸»å‡æœŸ', 'ä¸»å‡æœŸ', 'é€€æ½®æœŸ', 'é«˜æ½®æœŸ', 'ä¸»å‡æœŸ', 'ä¸»å‡æœŸ'],
            'æˆäº¤é¢': ['Â¥2000ä¸‡', 'Â¥3000ä¸‡', 'Â¥5000ä¸‡', 'Â¥6000ä¸‡', 'Â¥400ä¸‡', 'Â¥1500ä¸‡'],
            'ç«ä»·æŠ¢ç­¹åº¦': ['1.12%', '2.50%', '3.00%', '2.80%', '0.80%', '0.90%'],
            'æµåŠ¨æ€§é™·é˜±': ['âš ï¸ æ˜¯', 'âŒ å¦', 'âŒ å¦', 'âŒ å¦', 'âŒ å¦', 'âŒ å¦'],
            'çœŸé¾™ç±»å‹': ['ğŸ› æ‚æ¯›', 'ğŸ‰ çœŸé¾™', 'ğŸ‰ çœŸé¾™', 'ğŸ‰ çœŸé¾™', 'ğŸ› æ‚æ¯›', 'ğŸ¦† å¼±è·Ÿé£'],
            'æ˜¯å¦å¦å†³': ['ğŸš« æ˜¯', 'ğŸš« æ˜¯', 'ğŸš« æ˜¯', 'ğŸš« æ˜¯', 'ğŸš« æ˜¯', 'ğŸš« æ˜¯'],
            'å¦å†³åŸå› ': [
                'æµåŠ¨æ€§é™·é˜±',
                'STè‚¡',
                'é€€æ½®æœŸ',
                'é«˜æ½®æœŸæ‰“æ¿',
                'æ‚æ¯›è‚¡',
                'å¼±è·Ÿé£'
            ]
        })
        
        st.dataframe(veto_cases, use_container_width=True)
        
        st.markdown("#### ğŸ¯ ç­–ç•¥ä»²è£åº­å†³ç­–æµç¨‹")
        
        # å†³ç­–æµç¨‹å›¾
        st.markdown("""
        ```
        å¼€å§‹
          â†“
        æ£€æŸ¥ä¸€ç¥¨å¦å†³
          â†“
        â”œâ”€ STè‚¡ï¼Ÿ â†’ æ˜¯ â†’ ğŸš« å¦å†³
        â”œâ”€ é€€æ½®æœŸï¼Ÿ â†’ æ˜¯ â†’ åæ ¸æ¨¡å¼ï¼Ÿ â†’ å¦ â†’ ğŸš« å¦å†³
        â”œâ”€ é«˜æ½®æœŸï¼Ÿ â†’ æ˜¯ â†’ æ¶¨åœæ¿ï¼Ÿ â†’ æ˜¯ â†’ ğŸš« å¦å†³
        â”œâ”€ æµåŠ¨æ€§é™·é˜±ï¼Ÿ â†’ æ˜¯ â†’ ğŸš« å¦å†³
        â”œâ”€ æ‚æ¯›è‚¡ï¼Ÿ â†’ æ˜¯ â†’ ğŸš« å¦å†³
        â””â”€ å¼±è·Ÿé£ï¼Ÿ â†’ æ˜¯ â†’ ğŸš« å¦å†³
          â†“
        é€šè¿‡ä¸€ç¥¨å¦å†³æ£€æŸ¥
          â†“
        åŠ æƒæ‰“åˆ†
          â†“
        è¾“å‡ºå†³ç­–ï¼ˆBUY/SELL/WAIT/REJECTï¼‰
        ```
        """)
        
        st.markdown("""
        **æ ¸å¿ƒä»·å€¼**ï¼š
        - **é¿å…è¸©é›·**ï¼šé€šè¿‡ä¸€ç¥¨å¦å†³æœºåˆ¶ï¼Œé¿å…ä¹°å…¥æµåŠ¨æ€§ä¸è¶³çš„è‚¡ç¥¨
        - **æé«˜èƒœç‡**ï¼šåªæ“ä½œçœŸé¾™å’Œå¼ºè·Ÿé£ï¼Œæé«˜æ“ä½œèƒœç‡
        - **é™ä½é£é™©**ï¼šåœ¨é€€æ½®æœŸå’ŒSTè‚¡ä¸Šä¸¥æ ¼æ‰§è¡Œä¸€ç¥¨å¦å†³ï¼Œé™ä½é£é™©
        - **ç»Ÿä¸€å†³ç­–**ï¼šé€šè¿‡ç­–ç•¥ä»²è£åº­ï¼Œç»Ÿä¸€å¤šä¸ªç­–ç•¥æ¨¡å—çš„å†²çª
        """)
    
    # æ€»ç»“
    st.markdown("---")
    st.markdown("### ğŸ“ V8.1 æ€»ç»“")
    st.markdown("""
    **æ ¸å¿ƒæ”¹è¿›**ï¼š
    
    1. **é‡æ¯”BUGä¿®å¤**ï¼šä¿®å¤æ‰‹æ•°vsè‚¡æ•°çš„å•ä½æ¢ç®—é—®é¢˜ï¼Œé‡æ¯”ä»12577å€ä¿®å¤ä¸º125å€
    2. **æµåŠ¨æ€§é™·é˜±è¯†åˆ«**ï¼šè¯†åˆ«ç¼©é‡æ‹‰å‡é™·é˜±ï¼ˆç«ä»·é‡‘é¢<500ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦<2%ï¼‰
    3. **çœŸé¾™è¯†åˆ«ç³»ç»Ÿ**ï¼šåŒºåˆ†é¾™å¤´vsè·Ÿé£ï¼ˆæˆäº¤é¢>5000ä¸‡ï¼Œç«ä»·æŠ¢ç­¹åº¦>2%ï¼‰
    4. **ç­–ç•¥ä»²è£åº­ä¸€ç¥¨å¦å†³**ï¼šæµåŠ¨æ€§ä¸è¶³çš„ä¸€ç¥¨å¦å†³ï¼Œé¿å…è¸©é›·
    
    **æ ¸å¿ƒä»·å€¼**ï¼š
    - **é¿å…è¸©é›·**ï¼šé€šè¿‡æµåŠ¨æ€§é™·é˜±è¯†åˆ«å’Œä¸€ç¥¨å¦å†³ï¼Œé¿å…ä¹°å…¥ç¼©é‡æ‹‰å‡çš„é™·é˜±è‚¡
    - **æé«˜èƒœç‡**ï¼šåªæ“ä½œçœŸé¾™å’Œå¼ºè·Ÿé£ï¼Œæé«˜æ“ä½œèƒœç‡
    - **é™ä½é£é™©**ï¼šä¸¥æ ¼æ‰§è¡Œä¸€ç¥¨å¦å†³æœºåˆ¶ï¼Œé™ä½æ“ä½œé£é™©
    - **ç»Ÿä¸€å†³ç­–**ï¼šé€šè¿‡ç­–ç•¥ä»²è£åº­ï¼Œç»Ÿä¸€å¤šä¸ªç­–ç•¥æ¨¡å—çš„å†²çª
    
    **ä»"ç¥æ€ç”µå­"æ¡ˆä¾‹å­¦åˆ°çš„æ•™è®­**ï¼š
    - ä¸è¦è¢«æ¶¨å¹…è¿·æƒ‘ï¼šæ¶¨å¹…12.83%çœ‹ä¼¼å¾ˆå¼ºï¼Œä½†ç«ä»·é‡åªæœ‰449æ‰‹ï¼ˆ104ä¸‡ï¼‰
    - ä¸è¦è¢«é‡æ¯”è¿·æƒ‘ï¼šé‡æ¯”12577å€æ˜¯BUGï¼Œä¿®å¤åæ˜¯125å€ï¼Œä¾ç„¶æ˜¯æ”»å‡»æ€§æ”¾é‡
    - è¦çœ‹æµåŠ¨æ€§ï¼šç«ä»·é‡‘é¢<500ä¸‡ï¼Œå¤§èµ„é‡‘è¿›ä¸å»ä¹Ÿå‡ºä¸æ¥
    - è¦çœ‹çœŸé¾™ç±»å‹ï¼šç¥æ€ç”µå­æ˜¯æ‚æ¯›ï¼Œä¸æ˜¯çœŸé¾™ï¼Œä¸å…·å¤‡æ“ä½œä»·å€¼
    - è¦ç›¸ä¿¡ç³»ç»Ÿï¼šç­–ç•¥ä»²è£åº­ä¼šä¸€ç¥¨å¦å†³ï¼Œé¿å…è¸©é›·
    """)